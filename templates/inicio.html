{% extends 'base.html' %}
{% load static %}

{% block title %}{{ inicio.titulo_principal|default:"Barbería - Inicio" }}{% endblock %}

{% block content %}
<body>
    

<!-- Hero Section -->
<section class="hero" style="background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('{{ inicio.imagen_principal.url }}') center/cover no-repeat;">
    <div class="hero-content fade-in-up">

        {% if inicio.img_prin %}
            <img src="{{ inicio.img_prin.url }}" alt="Imagen principal" class="titulo-imagen">
        {% else %}
            <h1>{{ inicio.sobre_titulo|default:"Tu Barbería de Confianza" }}</h1>
        {% endif %}

        <div class="hero-texto">
            <p class="subtitle">{{ inicio.subtitulo|default:"Estilo, Calidad y Tradición" }}</p>
            <p class="hero-description">
                {{ inicio.contenido|default:"Descubre la experiencia única de una barbería moderna con el toque clásico que buscas." }}
            </p>

            <div class="cta-buttons">
                {% if contacto.whatsapp %}
                    <a href="https://wa.me/{{ contacto.whatsapp }}?text=Hola, me gustaría reservar una cita" 
                       class="btn-primary" target="_blank">
                        <i class="fab fa-whatsapp"></i> Reservar Cita
                    </a>
                {% endif %}
                <a href="#servicios" class="btn-secondary">
                    <i class="fas fa-cut"></i> Ver Servicios
                </a>
            </div>
        </div>
    </div>
</section>


<!--About Section-->

<section class="section section-light" id="sobre-nosotros">
    <div class="container">
        <h2 class="section-title kaushan-script-regular">
            <i class="fas fa-cut scissors-left"></i>
            {{ inicio.sobre_titulo|default:"Sobre Nosotros" }}
            <i class="fas fa-cut scissors-right"></i>
        </h2>

        <!-- Imagen móvil solo visible en <=768px -->
<div class="about-img-mobile">
    <div class="css-slider">
        <!-- Radio buttons ocultos para controlar el slider -->
        <input type="radio" name="slider" id="slide1" checked>
        <input type="radio" name="slider" id="slide2">
        
        <!-- Contenedor de las imágenes -->
        <div class="slider-wrapper">
            <div class="slides">
                {% if inicio.about_imagen_1 %}
                    <div class="slide">
                        <img src="{{ inicio.about_imagen_1.url }}" alt="About 1" class="about-img-chain">
                    </div>
                {% endif %}
                {% if inicio.about_imagen_2 %}
                    <div class="slide">
                        <img src="{{ inicio.about_imagen_2.url }}" alt="About 2" class="about-img-chain">
                    </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Indicadores/puntos -->
        <div class="slider-nav">
            <label for="slide1" class="nav-dot"></label>
            <label for="slide2" class="nav-dot"></label>
        </div>
    </div>
</div>

        <div class="grid-about">
            <div>
                <p class="text-large">
                    {{ inicio.sobre_contenido|default:"Somos una barbería con años de experiencia..." }}
                </p>
                {% if inicio.about_lista %}
                <div class="about-list-grid">
                    {% for item in inicio.about_lista.splitlines %}
                        <div class="about-list-item">
                            <i class="fas fa-check about-list-icon"></i>
                            <span>{{ item }}</span>
                        </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            <!-- Imágenes de escritorio solo visibles >768px -->
            <div class="about-images-chain">
                {% if inicio.about_imagen_1 %}
                    <img src="{{ inicio.about_imagen_1.url }}" alt="About 1" class="about-img-chain">
                {% endif %}
                {% if inicio.about_imagen_2 %}
                    <img src="{{ inicio.about_imagen_2.url }}" alt="About 2" class="about-img-chain">
                {% endif %}
            </div>
        </div>
    </div>
</section>



<!-- Services Section -->
<section class="section section-dark" id="servicios">
    <div class="container">
        <h2 class="section-title archivo-black">Servicios que Superan tus Expectativas</h2>
        <div class="services-grid">
            {% for servicio in servicios %}
            {% if servicio.activo %}
                <!-- Slider de imágenes del servicio (sin contenedor card) -->
                {% if servicio.imagenes.all %}
                <div class="service-image-slider" data-service-id="{{ servicio.id }}">
                    {% for imagen in servicio.imagenes.all %}
                    <div class="service-slide {% if forloop.first %}active{% endif %}">
                        <img src="{{ imagen.imagen.url }}" alt="{{ imagen.descripcion|default:servicio.titulo }}" class="service-img">
                    </div>
                    {% endfor %}
                    
                    <!-- Overlay con título que aparece al hacer hover -->
                    <div class="service-overlay">
                        <div class="service-overlay-title">{{ servicio.titulo }}</div>
                    </div>
                    
                    <!-- Indicadores solo si hay más de una imagen -->
                    {% if servicio.imagenes.count > 1 %}
                    <div class="service-slider-dots">
                        {% for imagen in servicio.imagenes.all %}
                        <span class="dot {% if forloop.first %}active{% endif %}" onclick="currentServiceSlide('{{ forloop.counter }}', '{{ servicio.id }}')"></span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% else %}
                <!-- Ícono por defecto si no hay imágenes (mantenemos un contenedor mínimo) -->
                <div class="service-icon-fallback">
                    <div class="icon-gold">
                        <i class="{{ servicio.icono }}"></i>
                    </div>
                    <h3 class="subtitle-gold">{{ servicio.titulo }}</h3>
                </div>
                {% endif %}
            {% endif %}
            {% empty %}
            <!-- Servicios por defecto si no hay servicios en la DB -->
            <div class="service-card">
                <div class="icon-gold">
                    <i class="fas fa-cut"></i>
                </div>
                <h3 class="subtitle-gold">Corte Clásico y Moderno</h3>

            </div>
            
            <div class="service-card">
                <div class="icon-gold">
                    <i class="fas fa-user-tie"></i>
                </div>
                <h3 class="subtitle-gold">Arreglo de Barba Premium</h3>
                
            </div>
            
            <div class="service-card">
                <div class="icon-gold">
                    <i class="fas fa-spa"></i>
                </div>
                <h3 class="subtitle-gold">Tratamientos Especiales</h3>
            </div>
            {% endfor %}
        </div>
        <!-- Divider elegante con tijeras y puntos -->
        <div class="divider-elegant">
            <span class="divider-dot">●</span>
            <span class="divider-dot">●</span>
            <span class="divider-dot">●</span>
            <span class="divider-scissors"><i class="fas fa-cut"></i></span>
            <span class="divider-dot">●</span>
            <span class="divider-dot">●</span>
            <span class="divider-dot">●</span>
        </div>
    </div>
</section>

<!-- Gallery Section (basic row gallery) -->
<section class="section section-light" id="galeria">
    <div class="container">
        <h2 class="section-title archivo-black">Algunos de Nuestros Trabajos</h2>
        <p style="text-align: center; font-size: 1.1rem; color: #666; margin-bottom: 3rem;">
            Consulta nuestra galería y déjate inspirar por nuestros trabajos
        </p>

        <div class="collage-grid js-masonry">
            <div class="grid-sizer"></div>
            {% for item in galeria %}
                {% if item.video or item.video_url %}
                    <div class="collage-item">
                        {% if item.video %}
                            <video class="collage-media basic-media" muted playsinline preload="metadata" controls>
                                <source src="{{ item.video.url }}" type="video/mp4">
                                Tu navegador no soporta el elemento video.
                            </video>
                        {% else %}
                            {% if 'youtube.com' in item.video_url or 'youtu.be' in item.video_url %}
                                <div class="video-embed">
                                    <iframe class="collage-media basic-media" src="{{ item.video_url }}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            {% elif 'vimeo.com' in item.video_url %}
                                <div class="video-embed">
                                    <iframe class="collage-media basic-media" src="{{ item.video_url }}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            {% else %}
                                <video class="collage-media basic-media" muted playsinline preload="metadata" controls>
                                    <source src="{{ item.video_url }}" type="video/mp4">
                                </video>
                            {% endif %}
                        {% endif %}

                        {% if item.descripcion %}
                            <div class="collage-caption">{{ item.descripcion }}</div>
                        {% endif %}
                    </div>
                {% elif item.imagen %}
                    <div class="collage-item">
                        <img src="{{ item.imagen.url }}" alt="{{ item.descripcion }}" class="collage-media basic-media" loading="lazy">
                        {% if item.descripcion %}
                            <div class="collage-caption">{{ item.descripcion }}</div>
                        {% endif %}
                    </div>
                {% else %}
                    {# skip items without media #}
                {% endif %}
            {% empty %}
                <div class="collage-item" style="width:100%">
                    <div style="text-align:center; padding:3rem; color:#666;">Próximamente agregaremos nuestra galería de trabajos.</div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="section section-dark">
    <div class="container" style="text-align: center;">
        <h2 style="font-family: 'Archivo Black', sans-serif; font-weight: 400; letter-spacing: 1px; text-transform: uppercase; font-size: 2.5rem; margin-bottom: 1rem; color: #d4af37;">
            ¿Listo para tu nuevo look?
        </h2>
        <p style="font-size: 1.2rem; margin-bottom: 2rem; color: #ccc;">
            Reserva tu cita ahora y experimenta el mejor servicio de barbería
        </p>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            {% if contacto.whatsapp %}
            <a href="https://wa.me/{{ contacto.whatsapp }}?text=Hola, me gustaría reservar una cita" class="btn-primary" target="_blank">
                <i class="fab fa-whatsapp"></i> Reservar por WhatsApp
            </a>
            {% endif %}
            {% if contacto.telefono %}
            <a href="tel:{{ contacto.telefono }}" class="btn-secondary">
                <i class="fas fa-phone"></i> Llamar Ahora
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/slider-mobile.js' %}"></script>
</body>
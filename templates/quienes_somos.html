{% extends 'base.html' %}
{% load static %}

{% block title %}{{ quienes_somos.titulo|default:"Quiénes Somos" }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/quienes-somos.css' %}?v={% now 'U' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/video-autoplay.js' %}"></script>
{% endblock %}

{% block content %}
<!-- Hero Section -->
{% if quienes_somos.imagen_principal %}
<section class="hero hero-small hero-with-image" style="--hero-img: url('{{ quienes_somos.imagen_principal.url }}'); --hero-pos: {{ quienes_somos.posicion_imagen_principal|default:'center top'|safe }};">
    <div class="hero-content fade-in-up">
        <h1>{{ quienes_somos.titulo|default:"Quiénes Somos" }}</h1>
        <p class="subtitle">{{ quienes_somos.subtitulo|default:"Conoce nuestra historia y pasión por la barbería" }}</p>
    </div>
</section>
{% else %}
<section class="hero hero-small">
    <div class="hero-content fade-in-up">
        <h1>{{ quienes_somos.titulo|default:"Quiénes Somos" }}</h1>
        <p class="subtitle">{{ quienes_somos.subtitulo|default:"Conoce nuestra historia y pasión por la barbería" }}</p>
    </div>
</section>
{% endif %}

<!-- Main Content Section -->
<section class="section section-light">
    <div class="container">
        <div class="grid-about">
            <div>
                {% comment %}
                (((Prioridad: 1) Video archivo, 2) Video URL, 3) Imagen
                {% endcomment %}
                {% if quienes_somos.video_archivo %}
                    <video class="video-about" controls id="about-video" data-autoplay-on-scroll volume="0.0" muted>
                        <source src="{{ quienes_somos.video_archivo.url }}" type="video/mp4">
                        Tu navegador no soporta el elemento video.
                    </video>
                {% elif quienes_somos.video_url %}
                    {% comment %}
                    Detectar tipo de URL y mostrar el embed correspondiente
                    {% endcomment %}
                    {% if "youtube.com" in quienes_somos.video_url or "youtu.be" in quienes_somos.video_url %}
                        {% load static %}
                        <div class="video-responsive">
                            {% if "youtu.be" in quienes_somos.video_url %}
                                <iframe src="https://www.youtube.com/embed/{{ quienes_somos.video_url|slice:"17:" }}" frameborder="0" allowfullscreen></iframe>
                            {% else %}
                                <iframe src="https://www.youtube.com/embed/{{ quienes_somos.video_url|slice:"32:" }}" frameborder="0" allowfullscreen></iframe>
                            {% endif %}
                        </div>
                    {% elif "vimeo.com" in quienes_somos.video_url %}
                        <div class="video-responsive">
                            <iframe src="https://player.vimeo.com/video/{{ quienes_somos.video_url|slice:"18:" }}" frameborder="0" allowfullscreen></iframe>
                        </div>
                    {% else %}
                        <!-- Video directo -->
                        <video class="video-about" controls id="about-video" data-autoplay-on-scroll volume="0.0" muted>
                            <source src="{{ quienes_somos.video_url }}" type="video/mp4">
                            Tu navegador no soporta el elemento video.
                        </video>
                    {% endif %}
                {% elif quienes_somos.imagen %}
                    <img src="{{ quienes_somos.imagen.url }}" alt="Quiénes somos" class="image-about">
                {% endif %}
            </div>
            <div class="contenido-elegante">
                <!-- Logo superior editable desde admin -->
                {% if quienes_somos.logo_superior %}
                <div class="logo-superior">
                    <img src="{{ quienes_somos.logo_superior.url }}" alt="Logo Superior" class="img-logo-superior">
                </div>
                {% endif %}
                
                <!-- Título principal manuscrito -->
                <h2 class="titulo-principal-manuscrito">
                    {{ quienes_somos.titulo_elegante }}
                </h2>
                
                <!-- Símbolo decorativo (tijeras) -->
                <div class="simbolo-decorativo">
                    <i class="fas fa-cut"></i>
                </div>
                
                <!-- Descripción artística -->
                <p class="descripcion-artistica">
                    {{ quienes_somos.frase_manuscrita }}
                </p>
                
                <!-- Título secundario en mayúsculas -->
                <h3 class="titulo-secundario-bold">
                    {{ quienes_somos.titulo_secundario }}
                </h3>
                
                <!-- Descripción detallada -->
                <p class="descripcion-detallada">
                    {{ quienes_somos.descripcion_experiencia }}
                </p>
            </div>
        </div>

        <!-- Galería de Instalaciones y Ambiente -->
        <div class="seccion-entretenimiento">
            <h2 class="titulo-entretenimiento">Echa un ojo</h2>
            
            <div class="grid-entretenimiento">
                <!-- Nuestras Instalaciones -->
                <div class="categoria-entretenimiento">
                    <h3 class="categoria-titulo">
                        <i class="fas fa-cut"></i>
                        NUESTRAS INSTALACIONES
                    </h3>
                    <div class="imagenes-categoria">
                        {% comment %}
                        Aquí irán las imágenes de las instalaciones y sillas de barbería
                        {% endcomment %}
                        {% if quienes_somos.imagen_instalacion_1 %}
                            <img src="{{ quienes_somos.imagen_instalacion_1.url }}" alt="Instalaciones 1" class="imagen-ambiente">
                        {% endif %}
                        {% if quienes_somos.imagen_instalacion_2 %}
                            <img src="{{ quienes_somos.imagen_instalacion_2.url }}" alt="Instalaciones 2" class="imagen-ambiente">
                        {% endif %}
                        {% if quienes_somos.imagen_instalacion_3 %}
                            <img src="{{ quienes_somos.imagen_instalacion_3.url }}" alt="Instalaciones 3" class="imagen-ambiente">
                        {% endif %}
                    </div>
                </div>

                <!-- Sala Retro -->
                <div class="categoria-entretenimiento">
                    <h3 class="categoria-titulo">
                        <i class="fas fa-chess-board"></i>
                        SALA RETRO
                    </h3>
                    <p class="subtitulo-categoria">Ambientada en los 90'</p>
                    <div class="imagenes-categoria">
                        {% comment %}
                        Aquí irán las imágenes de la sala retro con billar
                        {% endcomment %}
                        {% if quienes_somos.imagen_sala_retro_1 %}
                            <img src="{{ quienes_somos.imagen_sala_retro_1.url }}" alt="Sala Retro 1" class="imagen-ambiente">
                        {% endif %}
                        {% if quienes_somos.imagen_sala_retro_2 %}
                            <img src="{{ quienes_somos.imagen_sala_retro_2.url }}" alt="Sala Retro 2" class="imagen-ambiente">
                        {% endif %}
                        {% if quienes_somos.imagen_sala_retro_3 %}
                            <img src="{{ quienes_somos.imagen_sala_retro_3.url }}" alt="Sala Retro 3" class="imagen-ambiente">
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Mission, Vision, Values -->
        {% if quienes_somos.mision or quienes_somos.vision or quienes_somos.valores %}
        <div class="grid-values">
            {% if quienes_somos.mision %}
            <div class="value-card">
                <div class="icon-gold">
                    <i class="fas fa-bullseye"></i>
                </div>
                <h3 class="subtitle-gold">Misión</h3>
                <p class="text-normal">{{ quienes_somos.mision }}</p>
            </div>
            {% endif %}

            {% if quienes_somos.vision %}
            <div class="value-card">
                <div class="icon-gold">
                    <i class="fas fa-eye"></i>
                </div>
                <h3 class="subtitle-gold">Visión</h3>
                <p class="text-normal">{{ quienes_somos.vision }}</p>
            </div>
            {% endif %}

            {% if quienes_somos.valores %}
            <div class="value-card">
                <div class="icon-gold">
                    <i class="fas fa-heart"></i>
                </div>
                <h3 class="subtitle-gold">Valores</h3>
                <p class="text-normal">{{ quienes_somos.valores }}</p>
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>

<!-- Call to Action -->
<section class="section section-dark">
    <div class="container cta-section">
        <h2 class="cta-title">
            ¿Quieres conocernos mejor?
        </h2>
        <p class="cta-description">
            Ven a visitarnos y descubre por qué somos la barbería de confianza de tantos clientes
        </p>
        <div class="cta-buttons">
            <a href="{% url 'contacto' %}" class="btn-primary">
                <i class="fas fa-map-marker-alt"></i> Cómo Llegar
            </a>
            {% if contacto.whatsapp %}
            <a href="https://wa.me/{{ contacto.whatsapp }}?text=Hola, me gustaría más información" class="btn-secondary" target="_blank">
                <i class="fab fa-whatsapp"></i> Contactar
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

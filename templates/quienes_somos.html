{% extends 'base.html' %}
{% load static %}

{% block title %}{{ quienes_somos.titulo|default:"Quiénes Somos" }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages.css' %}">
<link rel="stylesheet" href="{% static 'css/quienes-somos.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/video-autoplay.js' %}"></script>
{% endblock %}

{% block content %}
<!-- Hero Section -->
{% if quienes_somos.imagen_principal %}
<section class="hero hero-small" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('{{ quienes_somos.imagen_principal.url }}') {{ quienes_somos.posicion_imagen_principal|default:"center" }}/cover no-repeat;">
    <div class="hero-content fade-in-up">
        <h1>{{ quienes_somos.titulo|default:"Quiénes Somos" }}</h1>
        <p class="subtitle">{{ quienes_somos.subtitulo|default:"Conoce nuestra historia y pasión por la barbería" }}</p>
    </div>
</section>
{% else %}
<section class="hero hero-small">
    <div class="hero-content fade-in-up">
        <h1>{{ quienes_somos.titulo|default:"Quiénes Somos" }}</h1>
        <p class="subtitle">{{ quienes_somos.subtitulo|default:"Conoce nuestra historia y pasión por la barbería" }}</p>
    </div>
</section>
{% endif %}

<!-- Main Content Section -->
<section class="section section-light">
    <div class="container">
        <div class="grid-about">
            <div>
                {% comment %}
                Prioridad: 1) Video archivo, 2) Video URL, 3) Imagen
                {% endcomment %}
                {% if quienes_somos.video_archivo %}
                    <video class="video-about" controls id="about-video" data-autoplay-on-scroll>
                        <source src="{{ quienes_somos.video_archivo.url }}" type="video/mp4">
                        Tu navegador no soporta el elemento video.
                    </video>
                {% elif quienes_somos.video_url %}
                    {% comment %}
                    Detectar tipo de URL y mostrar el embed correspondiente
                    {% endcomment %}
                    {% if "youtube.com" in quienes_somos.video_url or "youtu.be" in quienes_somos.video_url %}
                        {% load static %}
                        <div class="video-responsive">
                            {% if "youtu.be" in quienes_somos.video_url %}
                                <iframe src="https://www.youtube.com/embed/{{ quienes_somos.video_url|slice:"17:" }}" frameborder="0" allowfullscreen></iframe>
                            {% else %}
                                <iframe src="https://www.youtube.com/embed/{{ quienes_somos.video_url|slice:"32:" }}" frameborder="0" allowfullscreen></iframe>
                            {% endif %}
                        </div>
                    {% elif "vimeo.com" in quienes_somos.video_url %}
                        <div class="video-responsive">
                            <iframe src="https://player.vimeo.com/video/{{ quienes_somos.video_url|slice:"18:" }}" frameborder="0" allowfullscreen></iframe>
                        </div>
                    {% else %}
                        <!-- Video directo -->
                        <video class="video-about" controls id="about-video" data-autoplay-on-scroll>
                            <source src="{{ quienes_somos.video_url }}" type="video/mp4">
                            Tu navegador no soporta el elemento video.
                        </video>
                    {% endif %}
                {% elif quienes_somos.imagen %}
                    <img src="{{ quienes_somos.imagen.url }}" alt="Quiénes somos" class="image-about">
                {% endif %}
            </div>
            <div class="contenido-elegante" style="background: #ffffff !important;">
                <!-- Logo superior editable desde admin -->
                {% if quienes_somos.logo_superior %}
                <div class="logo-superior">
                    <img src="{{ quienes_somos.logo_superior.url }}" alt="Logo Superior" class="img-logo-superior">
                </div>
                {% endif %}
                
                <!-- Título principal manuscrito -->
                <h2 class="titulo-principal-manuscrito">
                    {{ quienes_somos.titulo_elegante }}
                </h2>
                
                <!-- Símbolo decorativo (tijeras) -->
                <div class="simbolo-decorativo">
                    <i class="fas fa-cut"></i>
                </div>
                
                <!-- Descripción artística -->
                <p class="descripcion-artistica">
                    {{ quienes_somos.frase_manuscrita }}
                </p>
                
                <!-- Título secundario en mayúsculas -->
                <h3 class="titulo-secundario-bold">
                    {{ quienes_somos.titulo_secundario }}
                </h3>
                
                <!-- Descripción detallada -->
                <p class="descripcion-detallada">
                    {{ quienes_somos.descripcion_experiencia }}
                </p>
            </div>
        </div>

        <!-- Mission, Vision, Values -->
        {% if quienes_somos.mision or quienes_somos.vision or quienes_somos.valores %}
        <div class="grid-values">
            {% if quienes_somos.mision %}
            <div class="value-card">
                <div class="icon-gold">
                    <i class="fas fa-bullseye"></i>
                </div>
                <h3 class="subtitle-gold">Misión</h3>
                <p class="text-normal">{{ quienes_somos.mision }}</p>
            </div>
            {% endif %}

            {% if quienes_somos.vision %}
            <div class="value-card">
                <div class="icon-gold">
                    <i class="fas fa-eye"></i>
                </div>
                <h3 class="subtitle-gold">Visión</h3>
                <p class="text-normal">{{ quienes_somos.vision }}</p>
            </div>
            {% endif %}

            {% if quienes_somos.valores %}
            <div class="value-card">
                <div class="icon-gold">
                    <i class="fas fa-heart"></i>
                </div>
                <h3 class="subtitle-gold">Valores</h3>
                <p class="text-normal">{{ quienes_somos.valores }}</p>
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>

<!-- Call to Action -->
<section class="section section-dark">
    <div class="container" style="text-align: center;">
        <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 1rem; color: #d4af37;">
            ¿Quieres conocernos mejor?
        </h2>
        <p style="font-size: 1.2rem; margin-bottom: 2rem; color: #ccc;">
            Ven a visitarnos y descubre por qué somos la barbería de confianza de tantos clientes
        </p>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <a href="{% url 'contacto' %}" class="btn-primary">
                <i class="fas fa-map-marker-alt"></i> Cómo Llegar
            </a>
            {% if contacto.whatsapp %}
            <a href="https://wa.me/{{ contacto.whatsapp }}?text=Hola, me gustaría más información" class="btn-secondary" target="_blank">
                <i class="fab fa-whatsapp"></i> Contactar
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
